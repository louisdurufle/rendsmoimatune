<table ng-if="expenditures.length > 0">
	<thead>
		<tr>
			<th>Date</th>
			<th>Nom</th>
			<th>Montant</th>
			<th>Payeur</th>
			<th>Participants</th>
		</tr>
	</thead>
	<tbody>
		<tr ng-repeat="expenditure in expenditures | orderBy: date:true | limitTo: limit">
			<td>{{ expenditure.date }}</td>
			<td><a ui-sref="account.edit-expenditure({expenditure_id: expenditure.id})" class="edit">{{ expenditure.name }}</a></td>
			<td>{{ expenditure.amount | amount }}</td>
			<td>{{ expenditure.payer }}</td>
			<td ng-if="(expenditure.debts | filter:{'share': 0}:true).length > expenditure.debts.length / 2">
				<span ng-repeat="debt in expenditure.debts | filter:{'share': '!0'}">
					{{ debt.debtor }}{{$last?'':', '}}
				</span>
			</td>
			<td ng-if="(expenditure.debts | filter:{'share': 0}:true).length <= expenditure.debts.length / 2">
				Tous
				<span ng-if="(expenditure.debts | filter:{'share': 0}:true).length > 0">
					sauf
				</span>
				<span ng-repeat="debt in expenditure.debts | filter:{'share': 0}:false">
					{{ debt.debtor }}{{$last?'':', '}}
				</span>
			</td>
		</tr>
	</tbody>
</table>
